import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

class RPNCalculatorTest {

    @Test
    void testBasicOperations() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createBasicTokenSet());

        assertEquals(7.0, calculator.calculate("3 4 add"));        // 3 + 4
        assertEquals(77.0, calculator.calculate("3 4 add 5 6 add mul")); // (3 + 4) * (5 + 6)
        assertEquals(1.0, calculator.calculate("3 4 sub 5 add"));  // (3 - 4) + 5
    }

    @Test
    void testExtendedOperations() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createExtendedTokenSet());

        assertEquals(81.0, calculator.calculate("9 2 pow"));       // 9^2
        assertEquals(3.0, calculator.calculate("9 3 mod"));        // 9 % 3
    }

    @Test
    void testMixedNotation() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createExtendedTokenSet());

        assertEquals(10.0, calculator.calculate("3 4 add 5 sub 6 add")); // ((3 + 4) - 5) + 6
        assertEquals(36.0, calculator.calculate("6 6 mul"));            // 6 * 6
    }
}
