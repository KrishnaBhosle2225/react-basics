import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

class RPNCalculatorTest {

    @Test
    void testBasicOperations() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createBasicTokenSet());

        // 3 + 4 = 7
        assertEquals(7.0, calculator.calculate("3 4 +"), 0.001);
        // (3 + 4) * (5 + 6) = 77
        assertEquals(77.0, calculator.calculate("3 4 + 5 6 + *"), 0.001);
        // (3 - 4) + 5 = 4
        assertEquals(4.0, calculator.calculate("3 4 - 5 +"), 0.001);
    }

    @Test
    void testExtendedOperations() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createExtendedTokenSet());

        // 9^2 = 81
        assertEquals(81.0, calculator.calculate("9 2 ^"), 0.001);
        // 9 % 3 = 0
        assertEquals(0.0, calculator.calculate("9 3 %"), 0.001);
    }

    @Test
    void testMixedNotation() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createExtendedTokenSet());

        // ((3 + 4) - 5) + 6 = 8
        assertEquals(8.0, calculator.calculate("3 4 + 5 - 6 +"), 0.001);
        // 6 * 6 = 36
        assertEquals(36.0, calculator.calculate("6 6 *"), 0.001);
    }

    @Test
    void testEnglishTokens() {
        Calculator calculator = new RPNCalculator(TokenSetFactory.createExtendedTokenSet());

        // 3 + 4 = 7
        assertEquals(7.0, calculator.calculate("3 4 add"), 0.001);
        // 9 % 4 = 1
        assertEquals(1.0, calculator.calculate("9 4 mod"), 0.001);
        // 5 * 5 = 25
        assertEquals(25.0, calculator.calculate("5 5 mul"), 0.001);
    }
}
